<!DOCTYPE html>
<html>
    <head>
        <title>Nature & Cognition Study</title>
        <script src="https://unpkg.com/jspsych@7.3.4"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-button-response"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-likert"></script>
        <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe@0.3"></script>
        <script src="questionnaires.js"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div id="jspsych-target"></div>

        <script src="script.js"></script>
        <!-- Link to your custom JavaScript file -->
    </body>
    <script>
        const jsPsych = initJsPsych({
            on_finish: function () {
                jsPsych.data.displayData("json") // Display data in browser
            },
        })

        var timeline = []

        timeline.push(demographics_consent)
        timeline.push(demographic_questionnaire)
        timeline.push(rrs_questionnaire_long)
        timeline.push(IAS_questionnaire)

        var video = {
            type: jsPsychHtmlButtonResponse,
            stimulus:
                '<iframe width="' +
                0.8 * window.innerWidth +
                '" height="' +
                0.8 * window.innerHeight +
                '" src="https://www.youtube.com/embed/Cl_kXbhTi8k"></iframe>',
            choices: ["I have watched the video and I'm ready to continue"],
        }
        timeline.push(video)

        timeline.push(bhs_questionnaire)
        timeline.push(rrs_questionnaire_short)

        var video_2 = {
            type: jsPsychHtmlButtonResponse,
            stimulus:
                '<iframe width="' +
                0.8 * window.innerWidth +
                '" height="' +
                0.8 * window.innerHeight +
                '" src="https://youtube.com/embed/TcgqDs-95Uw"></iframe>',
            choices: ["I have watched the video and I'm ready to continue"],
        }
        timeline.push(video_2)

        timeline.push(awe_experience_questionnaire)
        timeline.push(sts_questionnaire)

        var Debriefing = {
            type: jsPsychHtmlButtonResponse,
            stimulus:
                // Overview
                "<p align='left'><b>Debriefing of the study</b><br>" +
                "Thank you for completing the study, we hope that you enjoyed it. The purpose of this study was to see if there is an effect of the feeling of awe on depressive symptoms such as hopelessness and rumination through using videos to induce awe and measuring the effect on the symptoms using different scales such as the Self-Transcendance Scale. This study is being conducted by Dr Dominique Makowski and Faris Al-kadi from the School of Psychology, University of Sussex, who are happy to be contacted (D.Makowski@sussex.ac.uk, fa514@sussex.ac.uk) if you have any questions or need further clarifications about the study.</p>",
            choices: ["Goodbye, Have a nice day!"],
        }
        timeline.push(Debriefing)

        // // Save data via DataPipe
        // timeline.push({
        //     type: jsPsychPipe,
        //     action: "save",
        //     experiment_id: "U7CcBlVwxMiy", // This in generated in the DataPipe interface
        //     filename: `${jsPsych.randomization.randomID(10)}.csv`,
        //     data_string: () => jsPsych.data.get().csv(),
        // })

        jsPsych.run(timeline)
    </script>
</html>
